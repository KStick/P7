<!DOCTYPE html>
<html>
<head>
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="subject.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="../globalCSS.css">
	<meta http-equiv="refresh" content="10">
  <!--
        ServerURL change to contact another server
    -->
    <input type="hidden" id="serverCWD" value="http://localhost/P7/proofOfConcept"></input>
    <input type="hidden" id="REST" value="http://localhost:5000"></input>
</head>

<body>
	<table id="myTable">
		<thead>
			<tr id="rows" >
				<th onclick="sortTable(0)">Name</th>
				<th onclick="sortTable(1)">Subject</th>
				<th onclick="sortTable(2)">Description</th>
				<th onclick="sortTable(3)">Submitted</th>
			</tr>
		</thead>
	</table>
</body>

<script type="text/javascript">
  serverCWD = document.getElementById("serverCWD").value.toString();
  REST = document.getElementById("REST").value.toString();

	$(document).ready(function() {     
        $.ajax({
          data: {access : 'private', submit : 'no'},
          type: 'POST',
          url: REST + '/Questions',
          cache: false,
          success: function(text){         
          var stringsplit = text.split(",");
          printQueue(stringsplit);
        },
        error: function(text) {},
        });
    });

  function printQueue(text) {
    var contentToPrint;
    var tableHTML = "<tbody id='tutorTableBody'>";
    for (var i = 0; i < text.length-1; i++) {
        if (i%8==0) {
            tableHTML += "<tr onclick='goToSessionPrivate(" + Number(text[i].replace(/[[(\s]/g, '')) + ")'>";
            for (var j = i; j < i+8; j++) {
                if(j%8==0 || j%8==5 || j%8==6 || j%8==7){/*do nothing*/}
                else if(j%8==1 || j%8==2){
                    tableHTML += "<td> " + text[j].replace(/(['])/g, ''); + " </td>" ;
                }
                else if(j%8==7){
                    tableHTML += "<td> " + text[j].replace(/([)])/g, ''); + " </td>" ;
                }
                else{
                    tableHTML += "<td> " + text[j] + " </td>" ;
                }
            }
            tableHTML += "</tr>";
        }
    }
    document.getElementById("myTable").innerHTML += "</tbody>";
    document.getElementById("myTable").innerHTML += tableHTML;
  }

</script>

<script type="text/javascript" src="subject.js">
  
</script>
</html>
